---
layout: post
title:  "세션과 쿠키"
date:   2020-05-29 08:00:24 +0800
categories: HTTP
tags: [HTTP]
comments: false
---

>#  HTTP

비연결지향(Connectionless) : HTTP 프로토콜의 특징중 하나는 비연결지향(Connectionless) 이다.  
클라이언트가 리퀘스트를 보내고 서버가 리스폰스를 보내고 나면 접속을 끊어버린다.
헤더에 Keep-Alive라는 값을 줘서 커넥션을 재활용 할수 있다.  
  
상태정보유지않함(Stateless) :  클라이언트와 서버의 연결이 끊나면 상태정보를 유지하지 않는 특성이 있다.  

HTTP는 이 두가지 특성을 보완하기 위해서 쿠키와 세션을 사용하게 되었다.
비연결지향이라는 특성 덕분에 계속해서 통신 연결을 유지하지 않기 때문에 리소스 낭비가 줄어드는것은 장점이지만  
통신할 때마다 커넥션을 새로열어야 하므로 클라이언트는 내가 누구인지 인증을 계속해야 하는 단점이 있다.  
만약 쿠키와 새션이 없다면 어떤 페이지에 접속할때 마다 로그인을 다시 해야 하는 문제가 생긴다.

<br/>

># 쿠키(Cookie)

쿠키는 클라이언트 로컬에 저장되는 키와 값을 가진 데이터 파일이다.  
쿠키에는 이름,값,만료날짜,경로 정보가 들어있다. 쿠키는 일정시간동안 데이터를 저장할 수 있다.
쿠키는 클라이언트의 상태 정보를 로컬에 저장했다가 참조한다.

## 쿠키프로세스
1. 브라우저에서 웹페이지 접속
2. 클라이언트가 요청한 웹페이지를 받으면서 서버에서 헤더정보에 쿠키정보가 있으면 쿠키를 클라이언트 로컬에 저장
3. 클라이언트가 재요청시 웹페이지 요청정보와 리퀘스트 헤더에 쿠키값도 함께 전송
4. 쿠키정보가 사라질때 까지 로그인 정보를 가지고 있는 것처럼 사용

## 쿠키특징
- 보안에 취약하다. 쿠키는 사용자의 정보를 브라우저가 가지고 있는거기에 개발자모드로도 충분히 정보를 바꿀수 있다.
- 쿠키는 사용자가 따로 요청하지 않아도 브라우저가 Request시에 Request Header를 넣어서 자동으로 서버에 전송한다.
- 쿠키 생존 기간을 정할 수 있다. 그래서 브라우저를 껐다가 다시 켜도 쿠키정보가 남아있을 수 있다.
- 용량제한이 있다. 총 300개, 하나의 도메인당 20개, 하나의 쿠키당 4Kb

<br/>

># 세션(Session)

일정 시간동안 같은 브라우저로 부터 들어오는 일련의 요구를 하나의 상태로 보고 그 상태를 유지하는 기술  
즉, 웹 브라우저를 통해 웹 서버에 접속한 이후로 브라우저를 종료할 때 까지 유지되는 상태  
클라이언트가 Request를 보내면, 해당 서버의 엔진이 클라이언트에게 유일한 ID를 부여하는데 이것이 세션ID이다.  

## 세션프로세스
1. 클라이언트가 서버에 접속시 세션 ID를 발급 (로그인 정보를 확인 후 웹서버에 세션정보가 생김)
2. 서버에서는 클라이언트로 발급해준 세션 ID를 쿠키를 사용해 저장
3. 클라이언트는 다시 접속할 때, 이 쿠키정보를 이용해서 세션 ID값을 서버에 전달  

# 세션 특징
- 보안이 우수하다. (서버에서 생성하고 서버에서 정보를 가지고 있기 때문에 클라이언트는 정보를 바꿀 수 없다. )
- 세션은 처음 발급할때 쿠키 정보에 세션ID를 발급한다 (사용자가 세션 ID를 서버에 넘겨줘야 서버에서 어떤 사용자인지 알수 있기 때문)
- 브라우저 종료시 세션 ID도 날아간다 (쿠키에 보관되므로 세션 ID를 가지고 있는 쿠키를 기간이 있게 설정해두면 브라우저를 꺼도  
상태값을 유지할 수 있을것으로 생각한다... 하지만 서버에 세션ID의 기간이 있기때문에 계속 사용할 수는 확실히 없다.)


즉 세션 ID를 구별하기 위해 ID가 필요하고 그 ID만 쿠키를 이용해서 저장해 놓는다. 쿠키는 자동으로 서버에 전송되므로
서버에서 세션ID에 따른 처리를 할 수 있음. 


<br /> 

># 세션(Session)과 쿠키(Cookie)에 차이

- 가장 큰 특징으로 저장위치가 차이가 난다.  
- 클라이언트 입장에서 세션은 쿠키에 저장이 되므로 쿠키만 보인다.  
- 세션은 웹서버에 저장이 되어있는 것이기 때문에 클라이언트는 자신만의 세션ID말고는 볼 수 없다.  
- 쿠키와 세션은 엄연히 다르다. 사용자들의 상태를 저장하기 위한것이 세션이다. 서버에서 ID를 발급하고 저장을 하기 때문에 클라이언트는 발급받은 ID로 접속을 하면 (쿠키를 사용) 사용자의 상태를 알수 있다.  
- 처리 위치가 다르다.
- 엄연히 다른 기술이다.
- 클라이언트가 상태를 가지고 있어야 할때 사용하는게 쿠키, 서버가 사용자들의 상태를 가지고 있어야 할때 세션





